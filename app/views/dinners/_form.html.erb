<%= simple_form_for @dinner do |form| %>
    <%= form.input :dinner_date, as: :date, start_year: Date.today.year - 120,
                              end_year: Date.today.year + 10,
                              order: [:day, :month, :year] %>

    <%= form.nested_fields_for :dinner_recipes do |ff| %>
      <%= ff.remove_nested_fields_link do %>
        <i class="fa fa-times btn-danger"></i>
      <% end %>
      <%= ff.input :recipe_id, collection: @recipes, label: "Recipe", placeholder: "Burger" %>
      <%= form.add_nested_fields_link :dinner_recipes do %>
        <i class="fa fa-plus-circle">"add recipe"</i>
      <% end %>
    <%end%>

    <%= form.nested_fields_for :dinner_guests do |ff| %>
      <%= ff.remove_nested_fields_link do %>
        <i class="fa fa-times btn-danger"></i>
      <% end %>
      <%= ff.input :guest_id, collection: @guests, label: "Guest", placeholder: "John Doe", :label_method => lambda { |guest| "#{guest.first_name} #{guest.last_name}" } %>
      <%= form.add_nested_fields_link :dinner_guests do %>
        <i class="fa fa-plus-circle"></i>
      <% end %>
    <%end%>

    <%= form.button :submit, class: "btn btn-primary", method: :post %>
    <%= link_to "Cancel", dinners_path, class:"btn btn-default" %>
<% end %>

<!-- TODO : protect via ajax and JS sending multiple times the samed recipe -->
